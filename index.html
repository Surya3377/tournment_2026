<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>2026 Pongal Tournament</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      body {
        font-family: "Inter", sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      }
      .container {
        max-width: 600px;
      }
      .custom-scroll::-webkit-scrollbar {
        display: none;
      }
      .custom-scroll {
        -ms-overflow-style: none;
        scrollbar-width: none;
      }
      .fade-in {
        animation: fadeIn 0.3s ease-in;
      }
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      .bounce-in {
        animation: bounceIn 0.5s ease-out;
      }
      @keyframes bounceIn {
        0% {
          transform: scale(0.3);
          opacity: 0;
        }
        50% {
          transform: scale(1.05);
        }
        70% {
          transform: scale(0.9);
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
    </style>
  </head>
  <body class="flex items-center justify-center min-h-screen p-4 custom-scroll">
    <div
      class="container bg-white/95 backdrop-blur-sm rounded-3xl shadow-2xl p-8 space-y-8 flex flex-col items-center"
    >
      <header class="text-center space-y-3">
        <div
          class="w-16 h-16 bg-gradient-to-r from-orange-400 to-red-500 rounded-full mx-auto mb-4 flex items-center justify-center"
        >
          <span class="text-white text-2xl">üèÜ</span>
        </div>
        <h1
          class="text-4xl font-bold bg-gradient-to-r from-orange-600 to-red-600 bg-clip-text text-transparent"
        >
          2026 Pongal Tournament
        </h1>
        <p class="text-gray-600">Register for the celebration tournament</p>
      </header>

      <section class="w-full space-y-4">
        <div class="space-y-2">
          <label for="name" class="block text-gray-700 font-semibold"
            >1. Name</label
          >
          <input
            type="text"
            id="name"
            placeholder="Enter your full name"
            class="w-full p-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition duration-300 bg-gray-50 focus:bg-white"
          />
        </div>

        <div class="space-y-2">
          <label for="tshirt-size" class="block text-gray-700 font-semibold"
            >2. T-shirt Size</label
          >
          <select
            id="tshirt-size"
            class="w-full p-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition duration-300 bg-gray-50 focus:bg-white"
          >
            <option value="">Select size</option>
            <option value="XS">XS</option>
            <option value="S">S</option>
            <option value="M">M</option>
            <option value="L">L</option>
            <option value="XL">XL</option>
            <option value="XXL">XXL</option>
            <option value="XXXL">XXXL</option>
          </select>
        </div>

        <div class="space-y-2">
          <label for="number" class="block text-gray-700 font-semibold"
            >3. T-shirt Number</label
          >
          <input
            type="number"
            id="number"
            placeholder="Enter T-shirt number (1-99)"
            min="1"
            max="99"
            class="w-full p-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-transparent transition duration-300 bg-gray-50 focus:bg-white"
          />
          <div id="number-warning" class="text-sm text-amber-600 hidden">
            ‚ö†Ô∏è This number is already taken
          </div>
        </div>

        <button
          id="register-button"
          class="w-full bg-gradient-to-r from-orange-500 to-red-500 text-white font-bold py-4 rounded-xl shadow-lg hover:shadow-xl hover:scale-[1.02] transition-all duration-300"
        >
          üéØ Register Now
        </button>
        <button
          id="cancel-edit-button"
          class="w-full bg-gray-400 text-white font-bold py-3 rounded-xl shadow-md hover:bg-gray-500 hover:scale-[1.02] transition-all duration-300 hidden"
        >
          Cancel Edit
        </button>
        <div
          id="message"
          class="text-center p-3 rounded-xl text-sm transition-all duration-300 transform scale-y-0 h-0 opacity-0"
        ></div>
      </section>

      <section class="w-full space-y-4 pt-8 border-t border-gray-200">
        <div class="flex justify-between items-center">
          <h2 class="text-2xl font-semibold text-gray-800">
            Registered Players
          </h2>
          <div class="flex items-center space-x-2 text-sm text-gray-600">
            <span
              id="total-count"
              class="bg-orange-100 text-orange-800 px-2 py-1 rounded-full font-semibold"
              >0</span
            >
            <span>registered</span>
          </div>
        </div>
        <div
          id="user-list"
          class="space-y-3 max-h-96 overflow-y-auto custom-scroll"
        >
          <div class="text-center py-8">
            <div
              class="w-12 h-12 bg-gray-200 rounded-full mx-auto mb-3 flex items-center justify-center"
            >
              <span class="text-gray-400 text-xl">üë•</span>
            </div>
            <p class="text-gray-500">
              No players registered yet. Be the first!
            </p>
          </div>
        </div>
      </section>
    </div>

    <script>
      let registrations = [];
      let currentEditId = null;
      let nextId = 1;

      const registerButton = document.getElementById("register-button");
      const cancelButton = document.getElementById("cancel-edit-button");
      const nameInput = document.getElementById("name");
      const tshirtSizeSelect = document.getElementById("tshirt-size");
      const numberInput = document.getElementById("number");
      const userListDiv = document.getElementById("user-list");
      const messageDiv = document.getElementById("message");
      const totalCountSpan = document.getElementById("total-count");
      const numberWarning = document.getElementById("number-warning");

      // Function to display a temporary message with animations
      function showMessage(text, classes) {
        messageDiv.textContent = text;
        messageDiv.className = `text-center p-3 rounded-xl text-sm transition-all duration-300 transform scale-y-100 h-auto opacity-100 bounce-in ${classes}`;
        setTimeout(() => {
          messageDiv.className = `text-center p-3 rounded-xl text-sm transition-all duration-300 transform scale-y-0 h-0 opacity-0`;
        }, 4000);
      }

      // Check if number is already taken
      function checkNumberAvailability() {
        const number = numberInput.value;
        if (!number) {
          numberWarning.classList.add("hidden");
          return true;
        }

        const isTaken = registrations.some(
          (reg) => reg.number === number && reg.id !== currentEditId
        );

        if (isTaken) {
          numberWarning.classList.remove("hidden");
          return false;
        } else {
          numberWarning.classList.add("hidden");
          return true;
        }
      }

      // Update the total count display
      function updateCount() {
        totalCountSpan.textContent = registrations.length;
      }

      // Render the user list
      function renderUserList() {
        if (registrations.length === 0) {
          userListDiv.innerHTML = `
                    <div class="text-center py-8">
                        <div class="w-12 h-12 bg-gray-200 rounded-full mx-auto mb-3 flex items-center justify-center">
                            <span class="text-gray-400 text-xl">üë•</span>
                        </div>
                        <p class="text-gray-500">No players registered yet. Be the first!</p>
                    </div>
                `;
        } else {
          // Sort by registration order (timestamp)
          const sortedRegistrations = [...registrations].sort(
            (a, b) => a.timestamp - b.timestamp
          );

          userListDiv.innerHTML = sortedRegistrations
            .map(
              (user, index) => `
                    <div class="bg-gradient-to-r from-gray-50 to-gray-100 p-4 rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-all duration-300 fade-in" style="animation-delay: ${
                      index * 0.1
                    }s">
                        <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-2 sm:space-y-0">
                            <div class="flex items-center space-x-3">
                                <div class="w-10 h-10 bg-gradient-to-r from-orange-400 to-red-500 rounded-full flex items-center justify-center text-white font-bold">
                                    ${user.number}
                                </div>
                                <div>
                                    <p class="text-lg font-semibold text-gray-800">${
                                      user.name
                                    }</p>
                                    <p class="text-sm text-gray-600">Size: ${
                                      user.tshirtSize
                                    }</p>
                                </div>
                            </div>
                            <div class="flex space-x-2">
                                <button class="edit-button px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-xs font-semibold hover:bg-blue-200 transition duration-300" data-id="${
                                  user.id
                                }">
                                    ‚úèÔ∏è Edit
                                </button>
                                <button class="delete-button px-3 py-1 bg-red-100 text-red-700 rounded-full text-xs font-semibold hover:bg-red-200 transition duration-300" data-id="${
                                  user.id
                                }">
                                    üóëÔ∏è Delete
                                </button>
                            </div>
                        </div>
                    </div>
                `
            )
            .join("");
        }
        updateCount();
      }

      // Register button event listener
      registerButton.addEventListener("click", () => {
        const name = nameInput.value.trim();
        const tshirtSize = tshirtSizeSelect.value;
        const number = numberInput.value.trim();

        if (!name || !tshirtSize || !number) {
          showMessage(
            "Please fill in all fields! üìù",
            "bg-red-100 text-red-700 border border-red-200"
          );
          return;
        }

        if (!checkNumberAvailability()) {
          showMessage(
            "Please choose a different number! üî¢",
            "bg-amber-100 text-amber-700 border border-amber-200"
          );
          return;
        }

        if (currentEditId) {
          // Update existing registration
          const index = registrations.findIndex(
            (reg) => reg.id === currentEditId
          );
          if (index !== -1) {
            registrations[index] = {
              ...registrations[index],
              name,
              tshirtSize,
              number,
            };
            showMessage(
              `Updated ${name}'s registration! ‚ú®`,
              "bg-green-100 text-green-700 border border-green-200"
            );
          }
          // Reset edit mode
          currentEditId = null;
          registerButton.textContent = "üéØ Register Now";
          cancelButton.classList.add("hidden");
        } else {
          // Add new registration
          registrations.push({
            id: nextId++,
            name,
            tshirtSize,
            number,
            timestamp: Date.now(),
          });
          showMessage(
            `Welcome ${name}! Registration successful! üéâ`,
            "bg-green-100 text-green-700 border border-green-200"
          );
        }

        // Clear form
        nameInput.value = "";
        tshirtSizeSelect.value = "";
        numberInput.value = "";
        numberWarning.classList.add("hidden");

        renderUserList();
      });

      // Cancel edit button
      cancelButton.addEventListener("click", () => {
        nameInput.value = "";
        tshirtSizeSelect.value = "";
        numberInput.value = "";
        numberWarning.classList.add("hidden");
        currentEditId = null;
        registerButton.textContent = "üéØ Register Now";
        cancelButton.classList.add("hidden");
        showMessage(
          "Edit cancelled üëç",
          "bg-gray-100 text-gray-700 border border-gray-200"
        );
      });

      // Event delegation for edit and delete buttons
      userListDiv.addEventListener("click", (e) => {
        if (
          e.target.classList.contains("edit-button") ||
          e.target.closest(".edit-button")
        ) {
          const button = e.target.closest(".edit-button");
          const id = parseInt(button.dataset.id);
          const user = registrations.find((reg) => reg.id === id);

          if (user) {
            nameInput.value = user.name;
            tshirtSizeSelect.value = user.tshirtSize;
            numberInput.value = user.number;
            currentEditId = id;
            registerButton.textContent = "üí´ Update Registration";
            cancelButton.classList.remove("hidden");
            showMessage(
              `Editing ${user.name}'s registration`,
              "bg-blue-100 text-blue-700 border border-blue-200"
            );
            window.scrollTo({ top: 0, behavior: "smooth" });
          }
        }

        if (
          e.target.classList.contains("delete-button") ||
          e.target.closest(".delete-button")
        ) {
          const button = e.target.closest(".delete-button");
          const id = parseInt(button.dataset.id);
          const user = registrations.find((reg) => reg.id === id);

          if (
            user &&
            confirm(
              `Are you sure you want to delete ${user.name}'s registration?`
            )
          ) {
            registrations = registrations.filter((reg) => reg.id !== id);
            showMessage(
              `Deleted ${user.name}'s registration`,
              "bg-red-100 text-red-700 border border-red-200"
            );
            renderUserList();
          }
        }
      });

      // Check number availability on input
      numberInput.addEventListener("input", checkNumberAvailability);

      // Initialize the app
      renderUserList();
    </script>
  </body>
</html>
